{% extends "base.html" %}

{% block title %} Application {% endblock %}

{% block page %}Application{% endblock %}

{% block message %}
    <!-- Welcome -->
    <main>
        <div class="instr">
            Currently, ML_SandBox supports a selection of Application. We are actively working on expanding our Application library to include a wider range of options. Stay tuned for updates as we continue to enhance the project's capabilities.</div>
    </main>
{% endblock %}

{% block content %} 
<!-- Main Content -->
<main>
    <nav>
        <div class="nav nav-tabs" id="nav-tab" role="tablist">
            <a class="nav-item nav-link active" id="nav-home-tab" data-toggle="tab" href="#resume" role="tab" aria-controls="nav-home" aria-selected="true">placement Pred</a>
        </div>
    </nav>
</main>
<main>
    <div class="container" id="resume">
        <h2>Predict Job Placement</h2>
        <form id="algorithmForm" action="/process" method="POST" enctype="multipart/form-data" onsubmit="return submitForm(event)">
            <div class="form-group">
                <label for="gpa">GPA/Academic Scores</label>
                <input type="number" name="gpa" id="gpa" min="0" max="10" step="0.1" required><br><br>
                <label for="internship">No. of Internship</label>
                <input type="number" name="internship" id="internship" required><br><br>
                <label>Technical Skills (Select all that apply):</label>

                <div class="checkbox-container">
                    <div class="checkbox-item">
                        <input type="checkbox" name="technical[]" id="c++" value="c++">
                        <label for="c++">C++</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" name="technical[]" id="java" value="java">
                        <label for="java">Java</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" name="technical[]" id="python" value="python">
                        <label for="python">Python</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" name="technical[]" id="c" value="c">
                        <label for="c">C</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" name="technical[]" id="html" value="html">
                        <label for="html">HTML</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" name="technical[]" id="css" value="css">
                        <label for="css">CSS</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" name="technical[]" id="javascript" value="javascript">
                        <label for="javascript">JavaScript</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" name="technical[]" id="php" value="php">
                        <label for="php">PHP</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" name="technical[]" id="sql" value="sql">
                        <label for="sql">SQL</label>
                    </div>
                </div>
                <br><br>
                <label for="communication">Communication Skills</label>
                <select name="communication" id="communication" required>
                    <option value="0">Limited</option>
                    <option value="1">Adequate</option>
                    <option value="2">Strong</option>
                </select>
                <br><br>
                <label for="project">No. of Project</label>
                <input type="number" name="project" id="project" required>
            </div>
            
            <div class="btn">
                <div><button type="submit">Predict</button></div>
                <div><button type="reset">Reset</button></div>
            </div>
        </form>
        <div id="result"></div>
    </div>
</main>
{% endblock %}

<script>
function submitForm(event) {
    event.preventDefault();
    const form = document.getElementById('algorithmForm');
    const formData = new FormData(form);

    fetch('/process', {
        method: 'POST',
        body: formData
    })
    .then(response => response.json())
    .then(data => {
        const resultDiv = document.getElementById('result');
        if (data.error) {
            resultDiv.innerHTML = `<p>Error: ${data.error}</p>`;
        } else {
            resultDiv.innerHTML = `<p>Prediction: ${data.result}</p>`;
        }
    })
    .catch(error => {
        const resultDiv = document.getElementById('result');
        resultDiv.innerHTML = `<p>Error: ${error.message}</p>`;
    });

    return false;
}
</script>